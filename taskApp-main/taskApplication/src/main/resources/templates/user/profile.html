<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Management App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-roboto">
<nav class="header p-4 bg-blue-500 text-white">
    <div class="container mx-auto flex justify-between items-center">
        <a class="text-xl font-bold" href="#">Task Management App</a>
        <div>
            <a class="mr-4" href="/user/tasks">Tasks</a>
            <a class="mr-4" href="/user/profile">Profile</a>
            <a href="/logout">Logout</a>
        </div>
    </div>
</nav>

<div class="w-full md:w-4/5 p-6">
    <h2 class="text-3xl font-bold mb-4">User Profile</h2>

    <div class="bg-white p-6 rounded-lg shadow-lg">
        <!-- Profile Picture -->
        <div class="flex items-center mb-6">
            <img th:src="${user.photo}" alt="Profile picture of the user" class="w-48 h-48 rounded-full mr-4 border" />


            <form
                    th:action="@{/user/profile/upload-photo}"
                    method="post"
                    enctype="multipart/form-data"
                    class="ml-4"
            >
                <label class="cursor-pointer text-blue-500">
                    <i class="fas fa-camera"></i> Change Photo
                    <input
                            type="file"
                            name="photo"
                            class="hidden"
                            onchange="this.form.submit()"
                    />
                </label>
            </form>
        </div>

        <!-- Personal Information -->
        <form th:action="@{/user/profile/edit}" method="post">
            <h4 class="text-xl font-bold mb-2">Personal Information</h4>
            <div class="mb-4">
                <label for="username" class="block font-semibold">Username</label>
                <input
                        id="username"
                        name="username"
                        type="text"
                        class="w-full p-2 border rounded"
                        th:value="${user.username}"
                />
            </div>
            <div class="mb-4">
                <label for="email" class="block font-semibold">Email</label>
                <input
                        id="email"
                        name="email"
                        type="email"
                        class="w-full p-2 border rounded"
                        th:value="${user.email}"
                />
            </div>
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">
                Update Information
            </button>
        </form>

        <!-- Change Password -->
        <form th:action="@{/user/profile/change-password}" method="post" class="mt-6">
            <h4 class="text-xl font-bold mb-2">Change Password</h4>
            <div class="mb-4">
                <label for="currentPassword" class="block font-semibold">Current Password</label>
                <input
                        id="currentPassword"
                        name="currentPassword"
                        type="password"
                        class="w-full p-2 border rounded"
                        required
                />
            </div>
            <div class="mb-4">
                <label for="newPassword" class="block font-semibold">New Password</label>
                <input
                        id="newPassword"
                        name="newPassword"
                        type="password"
                        class="w-full p-2 border rounded"
                        required
                />
            </div>
            <div class="mb-4">
                <label for="confirmPassword" class="block font-semibold">Confirm New Password</label>
                <input
                        id="confirmPassword"
                        name="confirmPassword"
                        type="password"
                        class="w-full p-2 border rounded"
                        required
                />
            </div>
            <button type="submit" class="bg-yellow-500 text-white px-4 py-2 rounded">
                Change Password
            </button>
        </form>

    </div>
</div>

<footer class="header text-white text-center py-4 bg-blue-500">
    <p>&copy; 2024 Task Management App</p>
</footer>

</body>
</html>
